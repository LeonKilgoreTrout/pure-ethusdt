# Тестовое задание

## Настройка и запуск
1) создать и активировать окружение (python >= 3.11)
2) установить зависимости
```
pip install -r requirements.txt
```
3) находясь в корневой папке, для запуска прописать в терминале
```
python stream.py
```

## Ремарки:
 1) Происходит событие А влияющее на изменение btc и eth одинаково, например, обрушение FTX.
Является ли это влиянием цены btc на eth? Технически нет, но при выполнени ТЗ такие события опущены.
 2) Если изменения в курсе двух фьючерсов это исключительно покупка/продажа, то установить зависимость 
невозможно.
 3) Также опускаем одновременность получения значения двух разных фьючерсов
 4) Хорошо было бы анализировать по сглаживанию и использовать scipy, но решил начать с простого, также не использовал
 python-binance (а надо было пробовать)
 5) А ещё хорошо было бы сделать анимацию вместо картинки... Если что могу поправить :)
 
Рассмотрим картинку:

![Иллюстрация 1](https://github.com/LeonKilgoreTrout/pure-ethusdt/blob/main/images/currency_derivatives.png)

Ось x => номер замера

Ось y => производные функций изменения фьючерсов  

В основном нас интересуют кейсы в красных кругах, когда прирост двух фьючерсов практически одинаков.
Синие - игнорируются, Зелёные - приветствуются, Желтые под вопросом.

Также из картинки ниже:
Можно предположить, что ETHUSDT априори зависим от BTCUSDT (зеленая линия)
Красная линия - другой способ - опускает случаи когда изменения почти идентичны
Изменения фьючерса ETHUSDT - жёлтая линия
Изменения фьючерса BTCUSDT - синяя

![Иллюстрация 2](https://github.com/LeonKilgoreTrout/pure-ethusdt/blob/main/images/same_with_diffs.png)


Чтобы как-то протестировать работоспособность кода, рекомендую:
1) изменить процент с 1го на, например, 0.001 в stream -> Stream -> _follow
2) использовать Stream.run() в который можно передать время сколько будет исполнятся код (по умолчанию "inf"), и функцию из compare_funcs, 
3) раскомментить функцию и поменять значения (не забыть закомментить текущую) в async_retriever для генерации синтетических данных вместо реальных
4) уменьшить ttl для CurrencyList, проверить что список начинает себя чистить
5) визуализировать различие реального курса с независимым с помощью Stream.visualize_eth_values(), но для этого .run() должен быть конечным
